{"version":3,"sources":["App.tsx","index.js"],"names":["App","wait","useRef","useState","isPaused","setIsPaused","ticker","setTicker","isStarted","setIsStarted","useEffect","current","click$","fromEvent","doubleClick$","pipe","buffer","debounceTime","map","clicks","length","filter","tap","subscribe$","Subject","interval","takeUntil","subscribe","v","next","complete","className","Date","toISOString","slice","Stack","direction","spacing","Button","variant","onClick","ref","ReactDOM","render","document","getElementById"],"mappings":"oTAMaA,EAAgB,WAEzB,IAAMC,EAAOC,iBAAiC,MAC9C,EAAgCC,oBAAkB,GAAlD,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAA4BF,mBAAiB,GAA7C,mBAAOG,EAAP,KAAeC,EAAf,KACA,EAAkCJ,oBAAkB,GAApD,mBAAOK,EAAP,KAAkBC,EAAlB,KAGAC,qBAAU,WACN,GAAIT,GAAQA,EAAKU,QAAS,CACtB,IAAMC,EAASC,YAAiBZ,EAAKU,QAAS,SACxCG,EAAeF,EAAOG,KACxBC,YAAOJ,EAAOG,KAAKE,YAAa,OAChCC,aAAI,SAAAC,GAAM,OAAIA,EAAOC,UACrBC,aAAO,SAAAD,GAAM,OAAe,IAAXA,KACjBE,aAAI,kBAAMjB,GAAY,OAGpBkB,EAAa,IAAIC,IAUvB,OATAC,YAAS,KACJV,KACGW,YAAUH,GACVG,YAAUZ,IAEba,WAAU,YACNvB,GAAYI,GAAaD,GAAU,SAAAqB,GAAC,OAAIA,EAAI,UAG9C,WACHL,EAAWM,OACXN,EAAWO,eAGpB,CAACtB,EAAWJ,IAgBf,OAAO,sBAAK2B,UAAW,UAAhB,UACH,6BAAK,IAAIC,KAAK1B,GAAQ2B,cAAcC,MAAM,GAAI,MAE9C,eAACC,EAAA,EAAD,CAAOC,UAAU,MAAMC,QAAS,EAAhC,UACI,cAACC,EAAA,EAAD,CAAQC,QAAQ,YAAYC,QAlBtB,WACNpC,EACAC,GAAY,IAEZI,GAAcD,GACdD,EAAU,KAaV,wBACA,cAAC+B,EAAA,EAAD,CAAQC,QAAQ,YAAYE,IAAKxC,EAAjC,kBACA,cAACqC,EAAA,EAAD,CAAQC,QAAQ,YAAYC,QAXtB,WACVjC,EAAU,GACVF,GAAY,IASR,0BCzDZqC,IAASC,OACL,cAAC,EAAD,IACFC,SAASC,eAAe,W","file":"static/js/main.b4fce158.chunk.js","sourcesContent":["import {Button, Stack} from '@material-ui/core';\nimport React, {useEffect, useRef, useState} from 'react';\nimport {fromEvent, interval, Subject} from 'rxjs';\nimport {buffer, debounceTime, filter, map, takeUntil, tap} from \"rxjs/operators\";\nimport './index.css';\n\nexport const App: React.FC = () => {\n\n    const wait = useRef<HTMLButtonElement | null>(null);\n    const [isPaused, setIsPaused] = useState<boolean>(false);\n    const [ticker, setTicker] = useState<number>(0);\n    const [isStarted, setIsStarted] = useState<boolean>(false);\n\n\n    useEffect(() => {\n        if (wait && wait.current) {\n            const click$ = fromEvent<Event>(wait.current, 'click');\n            const doubleClick$ = click$.pipe(\n                buffer(click$.pipe(debounceTime(300))),\n                map(clicks => clicks.length),\n                filter(length => length === 2),\n                tap(() => setIsPaused(true))\n            )\n\n            const subscribe$ = new Subject<number>();\n            interval(1000)\n                .pipe(\n                    takeUntil(subscribe$),\n                    takeUntil(doubleClick$)\n                )\n                .subscribe(() => {\n                    !isPaused && isStarted && setTicker(v => v + 1000)\n                });\n\n            return () => {\n                subscribe$.next();\n                subscribe$.complete();\n            };\n        }\n    }, [isStarted, isPaused]);\n\n    const start = () => {\n        if (isPaused) {\n            setIsPaused(false)\n        } else {\n            setIsStarted(!isStarted);\n            setTicker(0)\n        }\n    }\n\n    const reset = () => {\n        setTicker(0);\n        setIsPaused(false)\n    }\n\n    return <div className={'wrapper'}>\n        <h1>{new Date(ticker).toISOString().slice(11, 19)}</h1>\n\n        <Stack direction=\"row\" spacing={2}>\n            <Button variant=\"contained\" onClick={start}>Start/Stop</Button>\n            <Button variant=\"contained\" ref={wait}>Wait</Button>\n            <Button variant=\"contained\" onClick={reset}>Reset</Button>\n        </Stack>\n    </div>\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {App} from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}